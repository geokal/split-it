@inherits ComponentBase

<div class="mb-3" style="background-color: #e6f2ff; border: 1px solid #b3c6e0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
    <div class="d-flex justify-content-between align-items-center p-3" 
         style="border-bottom: 1px solid #b3c6e0; cursor: pointer;"
         @onclick="OnToggleVisibility">
        <h1 class="news-heading form-label m-0">
            <span class="black-text">
                <span style="color: #b399d4; margin-left: 10px; margin-right: 5px;">
                    <i class="@IconClass"></i>
                </span>
                @Title
                @if (!string.IsNullOrEmpty(SecondaryIconClass))
                {
                    <span style="color: black; margin-left: 5px;">
                        <i class="@SecondaryIconClass"></i>
                    </span>
                }
            </span>
        </h1>
        <button class="btn" 
                style="width: 30px; height: 30px; border-radius: 50%; background-color: #0d47a1; color: white; border: none; padding: 0; display: flex; align-items: center; justify-content: center; margin-right: 10px;" 
                @onclick="OnToggleVisibility" @onclick:stopPropagation="true">
            @if (IsVisible)
            {
                <span>&#8722;</span> 
            }
            else
            {
                <span>&#43;</span> 
            }
        </button>
    </div>

    @if (IsVisible)
    {
        <div id="@ContentId" class="p-3" style="border-top: 1px solid #e6f2ff;">
            @if (Articles != null && Articles.Any())
            {
                @foreach (var article in Articles)
                {
                    <div class="news-article mb-2 pb-2" style="border-bottom: 1px dashed #ccc;">
                        <a href="@article.Url" target="_blank" style="color: #0d47a1; text-decoration: none;">
                            <i class="fa fa-external-link me-2" style="font-size: 0.8em;"></i>@article.Title
                        </a>
                    </div>
                }
            }
            else
            {
                <p class="mb-0 text-muted">@EmptyMessage</p>
            }
        </div>
    }
</div>

@code {
    [Parameter]
    public string Title { get; set; }

    [Parameter]
    public string IconClass { get; set; }

    [Parameter]
    public string SecondaryIconClass { get; set; }

    [Parameter]
    public bool IsVisible { get; set; }

    [Parameter]
    public EventCallback OnToggleVisibility { get; set; }

    [Parameter]
    public IEnumerable<NewsArticle> Articles { get; set; }

    [Parameter]
    public string EmptyMessage { get; set; }

    [Parameter]
    public string ContentId { get; set; }

    public class NewsArticle
    {
        public string Title { get; set; }
        public string Url { get; set; }
    }
}
